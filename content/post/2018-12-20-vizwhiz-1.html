---
title: "VizW(h)iz 1: Plotting Raw Data"
author: "R-Ladies Sydney"
date: '2018-12-20'
slug: "vizwhiz-1"
output: html_document
---



<p>Before we begin, a preamble…</p>
<div id="why-plot-raw-data" class="section level3">
<h3>Why plot raw data?</h3>
<p>Until I<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> started learning R about a year ago, I had only ever plotted averaged data. My plots looked like this…</p>
<p><img src="/post/2018-12-20-vizwhiz_files/figure1.jpg" width=75% align="center"></p>
<p>Or this….</p>
<p><img src="/post/2018-12-20-vizwhiz_files/figure2.jpg" width=50% align="center"></p>
<p>In 2016, I remember seeing <a href="https://www.kickstarter.com/projects/1474588473/barbarplots">#barbarplots</a> t-shirts and tote bags at a conference, but back then I didn’t know that the figures were made in R.</p>
<p><img src="/post/2018-12-20-vizwhiz_files/barplot_psa1.jpg" width=75% align="center"></p>
<blockquote>
<p>Check out this <a href="https://ksr-video.imgix.net/projects/2453455/video-665338-h264_high.mp4">video</a> for more info about the #barbarplots kickstarter campaign. And learn how to <a href="/post/2018-12-20-vizwhiz_files/_Exploding_Barplot.gif">explode bar plots</a> using code from <a href="https://zenodo.org/record/574883#.XAUTspMzaRs">here</a>.</p>
</blockquote>
</div>
<div id="so-if-not-bar-plots-then-what" class="section level3">
<h3>So, if not bar plots, then what?</h3>
<p>Bar plots with standard error bars obviously have their limitations, but what is the alternative? In this lesson, we’re going to learn about how to plot raw data using <code>ggplot2</code>. As in prior units, we’ll be using the sydneybeaches dataset, so be sure to have that on hand!</p>
</div>
<div id="lesson-outcomes" class="section level2">
<h2>Lesson Outcomes</h2>
<p>By the end of this lesson, you should:</p>
<div style="white-space: pre-line;">    1.1 Be able to use <code>geom_point</code>, <code>geom_jitter</code>, and <code>geom_quasirandom</code> to plot raw data
    1.2 Be able to use colour to differentiate subsets of data
    1.3 Be able to use <code>facet_wrap</code> to plot subsets of data separately
    1.4 Be able to combine <code>dpylr</code> functions like <code>filter</code> with <code>ggplot</code>
    1.5 Be able to use <code>ggsave</code> to export plots</div>
</div>
<div id="plotting-bug-levels-by-year" class="section level2">
<h2>1.1 Plotting bug levels by year</h2>
<p>If the councils that look after our beaches are doing their job, beaches should be less contaminated than they were 5 years ago, right? Let’s plot bug levels over time and see whether things seem to be getting better.</p>
<p>In this screencast, we’ll review:</p>
<ul>
<li>How to write cleaned data to a new csv file</li>
<li>How to plot raw data using <code>geom_point</code>, <code>geom_jitter</code>, and <code>geom_quasirandom</code></li>
</ul>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VQE8yj6OEVc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</center>
<p>Here’s the plot for reference:</p>
<p><img src="/post/2018-12-20-vizwhiz_files/bugsbyyear_jitter.png" width=60% align="center"></p>
<p>Watch the video and then carry out the following steps:</p>
<ol style="list-style-type: decimal">
<li>Use <code>geom_point</code> to plot buglevels by year</li>
<li>Play with <code>geom_jitter</code> and <code>geom_quasirandom</code>; which one is your favourite?</li>
<li>Check out the <code>ggbeeswarm</code> <a href="https://github.com/eclarke/ggbeeswarm">vignette</a> and try to make your quasirandom plot “smiley” or “frowny”</li>
<li>Try <code>geom_beeswarm</code> too!</li>
</ol>
</div>
<div id="using-colour-to-plot-bug-levels-by-site" class="section level2">
<h2>1.2 Using colour to plot bug levels by site</h2>
<p>There doesn’t seem to be an obvious improvement in bug levels in the past 5 years. I wonder whether some beaches are just more variable than others. Let’s use colour to differentiate between different sites.</p>
<p>In this screencast, we’ll review:</p>
<ul>
<li>How to plot raw data using <code>geom_jitter</code></li>
<li>How to deal with NAs in your data</li>
<li>How to use <code>coord_flip</code> to make axis labels visible</li>
<li>How to differentiate subsets within your data by changing the point colour</li>
<li>How to coerce variables into a different data format</li>
</ul>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Bl0fm8Zkt1M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</center>
<p>Here’s the plot for reference:</p>
<p><img src="/post/2018-12-20-vizwhiz_files/bugsbybeach_coloryear.png" width=60% align="center"></p>
<p>Watch the video and then carry out the following steps:</p>
<ol style="list-style-type: decimal">
<li>Use <code>geom_jitter</code> to plot bug levels for each site, differentiating between values from 2013-2018 with different coloured points</li>
<li>Try colouring the points by another variable (perhaps council or month). How does the visualisation change?</li>
</ol>
</div>
<div id="using-facet_wrap-to-plot-sites-separately" class="section level2">
<h2>1.3 Using facet_wrap() to plot sites separately</h2>
<p>Using colour is one way to differentiate between data points associated with different variables. Alternatively, you can group the data into different mini-plots using facet_wrap. In this screencast, we’ll review:</p>
<ul>
<li>How to use <code>facet_wrap</code> to visualise beachbug levels across years, separately for each site.</li>
</ul>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/uYhCZ5T5nVA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</center>
<p>Here’s the plot for reference:</p>
<p><img src="/post/2018-12-20-vizwhiz_files/bugsbybeach_facetsite_all.png" width=80% align="center"></p>
<p>Watch the video and perform the following steps:</p>
<ol style="list-style-type: decimal">
<li>Use <code>geom_jitter</code> and <code>facet_wrap</code> to plot buglevels by year, separately for each site</li>
<li>Try plotting buglevels by site, separately for each year. Hint: maybe using <code>coord_flip</code> is a good idea!</li>
</ol>
</div>
<div id="putting-it-all-together-dplyr-ggplot" class="section level2">
<h2>1.4 Putting it all together (dplyr + ggplot)</h2>
<p>What if you only want to compare a couple of sites? Or restrict the range of scores to exclude obvious outliers? You can combine dyplyr functions like <code>filter</code> with <code>ggplot</code> using the pipe %&gt;%. (The pipe was covered in #RYouWithMe Unit Clean It Up Lesson 1! Need a refresher? Click <a href="/post/2018/11/20/clean-it-up-1/">here</a>!)</p>
<p>In this screencast, we’ll review:</p>
<ul>
<li>How to use combine <code>filter</code> and <code>ggplot</code> to plot subsets of your data</li>
</ul>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/IJvA2RUMjQU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</center>
<p>Here’s the plot for reference:</p>
<p><img src="/post/2018-12-20-vizwhiz_files/bondicoogee.jpeg" width=50% align="center"></p>
<p>Watch the video and perform the following steps:</p>
<ol style="list-style-type: decimal">
<li>Pipe a <code>filter</code> function and a <code>ggplot</code> together to plot only values that are less than 1000</li>
<li>Try changing the filter value to only plot values less than 500</li>
<li>Use <code>filter</code> and <code>ggplot</code> to compare data from Coogee and Bondi</li>
<li>Pick your two favorite beaches and make a plot that compares the variability in beachbug values</li>
</ol>
</div>
<div id="how-to-get-your-plots-out-of-r-studio" class="section level2">
<h2>1.5 How to get your plots out of R Studio</h2>
<p>Of course, these beautiful plots are not much use if they are stuck in R Studio. The easiest way to export your plots and save them elsewhere on your computer is by using <code>ggsave</code>.</p>
<p>In this screencast, we’ll review:</p>
<ul>
<li>How to export your plots using <code>ggsave</code> and <code>here</code></li>
</ul>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/6BVmWAZn_sE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</center>
<p>Watch the video and perform the following steps:</p>
<ol style="list-style-type: decimal">
<li>Add a <code>ggsave</code> call after each chunk of code in your script to save your plots to a folder in your RYouWithMe project called “output”</li>
<li>Use the source button to run your code from top to bottom.</li>
<li>For Sydney-based R-Ladies: Pick your favourite exported plot and post it to the #ryouwithme_3_vizwhiz channel on Slack!</li>
</ol>
</div>
<div id="challenge---plot-your-own-data" class="section level2">
<h2>Challenge - plot your own data</h2>
<p>The next step is to plot your own data as raw values.</p>
<p>Steps to plotting your own raw data:</p>
<ol style="list-style-type: decimal">
<li>Remember that ggplot only likes “long” data, so if you have observations across several columns, go back to <a href="https://rladiessydney.org/post/2018/11/28/clean-it-up-4/">Clean it up Lesson 4</a> and brush up on how to convert your wide data into long format</li>
<li>Pick a categorical variable for your x axis</li>
<li>Pick a continuous variable for your y axis</li>
<li>Try out <code>geom_point</code>, <code>geom_jitter</code>, or <code>geom_quasirandom</code> and see which one makes the most sense for your data</li>
<li>Export using <code>ggsave</code></li>
</ol>
<p>If you are one of our Sydney-based RLadies, share your success (and /or your frustration!) in our Slack channel #ryouwithme_3_vizwhiz!</p>
<div id="looking-for-more" class="section level3">
<h3>Looking for more?</h3>
<p>Here are some additional resources:</p>
<ul>
<li>Paul van der Laken makes a good argument against bar graphs in his <a href="https://paulvanderlaken.com/2018/12/17/avoid-bar-plots-for-continuous-data-do-this-instead/">blog post here</a></li>
<li>Hadley Wickham’s book R for Data Science is a good place to start re <a href="https://r4ds.had.co.nz/data-visualisation.html">data visualisation</a>.</li>
<li>Nick Tierney and Saskia Freytag were talking data visualisation with Di Cook on the Credibly Curious podcast recently. Check out the episode <a href="https://soundcloud.com/crediblycurious/episode-5-graphics">here</a>.</li>
</ul>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Jen Richmond, R-Ladies Sydney co-founder and #RYouWithMe screencaster! (Twitter: <span class="citation">@JenRichmondPhD</span>)<a href="#fnref1">↩</a></p></li>
</ol>
</div>
